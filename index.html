<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025 Pro Qual</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header-section">
            <h1>2025 Pro Qual</h1>
            <div class="share-section">
                <button id="predictions-button" onclick="window.location.href='predictions.html'">Make Predictions</button>
            </div>
        </div>
        
        <div class="tournament-layout">
            <!-- Group Stage -->
            <div class="group-stage">
                <h2>Group Stage</h2>
                
                <div class="groups-container">
                    <!-- Group A -->
                    <div class="group">
                        <h3>Group A</h3>
                        <div class="group-matches" id="group-a-matches">
                            <!-- Group A matches will be generated by JavaScript -->
                        </div>
                    </div>
                    
                    <!-- Group B -->
                    <div class="group">
                        <h3>Group B</h3>
                        <div class="group-matches" id="group-b-matches">
                            <!-- Group B matches will be generated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Knockout Stage -->
            <div class="knockout-stage">
                <h2>Knockout Stage</h2>
                
                <div class="bracket">
                    <!-- Semifinals -->
                    <div class="round semifinals">
                        <h3>Semifinals</h3>
                        <div class="match" id="sf1-match">
                            <div class="match-info">
                                <span class="match-label">SF1: Group A 1st vs Group B 2nd</span>
                            </div>
                            <div class="match-players">
                                <div class="player-button results-only" id="sf1-a1">
                                    <span class="player-name" id="sf1-a1-name">Group A 1st</span>
                                    <span class="checkmark">✓</span>
                                </div>
                                <span class="vs-label">vs</span>
                                <div class="player-button results-only" id="sf1-b2">
                                    <span class="player-name" id="sf1-b2-name">Group B 2nd</span>
                                    <span class="checkmark">✓</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="match" id="sf2-match">
                            <div class="match-info">
                                <span class="match-label">SF2: Group B 1st vs Group A 2nd</span>
                            </div>
                            <div class="match-players">
                                <div class="player-button results-only" id="sf2-b1">
                                    <span class="player-name" id="sf2-b1-name">Group B 1st</span>
                                    <span class="checkmark">✓</span>
                                </div>
                                <span class="vs-label">vs</span>
                                <div class="player-button results-only" id="sf2-a2">
                                    <span class="player-name" id="sf2-a2-name">Group A 2nd</span>
                                    <span class="checkmark">✓</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Final -->
                    <div class="round final">
                        <h3>Final</h3>
                        <div class="match" id="final-match">
                            <div class="match-info">
                                <span class="match-label">Final: SF1 Winner vs SF2 Winner</span>
                            </div>
                            <div class="match-players">
                                <div class="player-button results-only" id="final-sf1">
                                    <span class="player-name" id="final-sf1-name">SF1 Winner</span>
                                    <span class="checkmark">✓</span>
                                </div>
                                <span class="vs-label">vs</span>
                                <div class="player-button results-only" id="final-sf2">
                                    <span class="player-name" id="final-sf2-name">SF2 Winner</span>
                                    <span class="checkmark">✓</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Group Standings -->
        <div class="group-standings-section">
            <h2>Group Stage Standings</h2>
            <div class="standings-container">
                <div class="standings-table">
                    <h3>Group A</h3>
                    <table id="group-a-standings">
                        <thead>
                            <tr>
                                <th>Player</th>
                                <th>W</th>
                                <th>L</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Group A standings will be generated by JavaScript -->
                        </tbody>
                    </table>
                </div>
                <div class="standings-table">
                    <h3>Group B</h3>
                    <table id="group-b-standings">
                        <thead>
                            <tr>
                                <th>Player</th>
                                <th>W</th>
                                <th>L</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Group B standings will be generated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- Disclaimer -->
        <div class="disclaimer">
            This site is not affiliated with the North American Go Federation.
        </div>
    </div>
    
    <script>
        // Dynamically load results.js based on environment
        const isLocalhost = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1' || window.location.hostname === "";
        
        async function loadResultsScript() {
            if (isLocalhost) {
                // Local: Load as normal script
                const script = document.createElement('script');
                script.src = 'results.js';
                script.async = false;
                script.onload = initializeWhenReady;
                document.head.appendChild(script);
            } else {
                // Production: Fetch from GitHub and execute (avoids MIME type issue)
                try {
                    const response = await fetch('https://raw.githubusercontent.com/DuskEagle/bracket/refs/heads/main/results.js');
                    
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                    }
                    
                    const scriptContent = await response.text();
                    
                    // Execute the script content
                    const script = document.createElement('script');
                    script.textContent = scriptContent;
                    document.head.appendChild(script);
                    
                    initializeWhenReady();
                } catch (error) {
                    console.error('Failed to load results from GitHub:', error);
                    console.log('Continuing without results...');
                    
                    // Fallback: try to initialize without results
                    initializeWhenReady();
                }
            }
        }
        
        function initializeWhenReady() {
            if (typeof initializeTournament === 'function') {
                if (document.readyState === 'loading') {
                    document.addEventListener('DOMContentLoaded', initializeTournament);
                } else {
                    initializeTournament();
                }
            }
        }
        
        // Start loading
        loadResultsScript();
    </script>
</body>
</html>
